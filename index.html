<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<title>Mine Legends Ultimate</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://telegram.org/js/telegram-web-app.js"></script>

<style>
body {
  margin: 0;
  font-family: sans-serif;
  background: #020617;
  color: white;
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
}
.app {
  width: 100%;
  max-width: 400px;
  background: #0f172a;
  border-radius: 20px;
  padding: 14px;
}
.stats {
  display: flex;
  justify-content: space-between;
  background: #020617;
  padding: 10px;
  border-radius: 12px;
}
.char {
  text-align: center;
  font-size: 48px;
  margin-top: 6px;
}
.mine {
  width: 160px;
  height: 160px;
  border-radius: 50%;
  background: radial-gradient(#22c55e,#166534);
  margin: 12px auto;
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 44px;
  cursor: pointer;
}
.tabs {
  display: flex;
  gap: 6px;
  margin-top: 6px;
}
.tabs button {
  flex: 1;
  border: none;
  border-radius: 10px;
  padding: 6px;
  background: #1e293b;
  color: white;
}
.box {
  display: none;
  margin-top: 8px;
}
.box.active {
  display: block;
}
.card {
  background: #1e293b;
  border-radius: 12px;
  padding: 10px;
  margin-bottom: 6px;
}
button {
  border: none;
  border-radius: 10px;
  padding: 6px;
  background: #38bdf8;
  width: 100%;
  cursor: pointer;
}
.skin {
  background: #020617;
  border-radius: 8px;
  padding: 6px;
  margin-top: 4px;
  cursor: pointer;
}
.active {
  background: #22c55e;
  color: black;
}
.log {
  text-align: center;
  font-size: 13px;
  opacity: 0.8;
}
</style>
</head>

<body>
<div class="app">
<h3 style="text-align:center">â› Mine Legends Ultimate</h3>

<div class="stats">
  <div>ğŸ’° <span id="coin">0</span></div>
  <div>â­ Lv <span id="level">1</span></div>
</div>

<div class="char" id="char">ğŸ‘·</div>
<div class="mine" onclick="mine()" id="pick">â›</div>

<div class="tabs">
  <button onclick="tab('up')">â¬†ï¸</button>
  <button onclick="tab('quest')">ğŸ“œ</button>
  <button onclick="tab('item')">ğŸ’</button>
  <button onclick="tab('skin')">ğŸ¨</button>
  <button onclick="tab('rank')">ğŸ†</button>
</div>

<!-- UPGRADES -->
<div id="up" class="box active">
  <div class="card">
    Power: <span id="power">1</span>
    <button onclick="upgrade()">Upgrade (<span id="pCost">10</span>)</button>
  </div>
  <div class="card">Auto Mine
    <button onclick="auto()">Buy (<span id="aCost">50</span>)</button>
  </div>
</div>

<!-- QUESTS -->
<div id="quest" class="box">
  <div class="card">Mine 100 <button onclick="quest(100,150)">Claim</button></div>
  <div class="card">Mine 500 <button onclick="quest(500,400)">Claim</button></div>
  <div class="card">Reach Lv 5 <button onclick="questLevel(5,500)">Claim</button></div>
  <div class="card">Mine 1000 <button onclick="quest(1000,1000)">Claim</button></div>
</div>

<!-- ITEMS -->
<div id="item" class="box">
  <div class="card">âš¡ Booster (200) <button onclick="booster()">Use</button></div>
  <div class="card">ğŸ§¿ Relic (500) <button onclick="relic()">Buy</button></div>
</div>

<!-- SKINS -->
<div id="skin" class="box">
  <div class="card">
    <b>ğŸ‘· Character</b>
    <div class="skin active" onclick="setChar('ğŸ‘·',this)">ğŸ‘· Miner</div>
    <div class="skin" onclick="buyChar('ğŸ§‘â€ğŸš€',300,this)">ğŸ§‘â€ğŸš€ Astronaut (300)</div>
    <div class="skin" onclick="buyChar('ğŸ§™â€â™‚ï¸',600,this)">ğŸ§™â€â™‚ï¸ Wizard (600)</div>
    <div class="skin" onclick="buyChar('ğŸ¤–',900,this)">ğŸ¤– Robot (900)</div>
    <div class="skin" onclick="buyChar('ğŸ§›â€â™‚ï¸',1200,this)">ğŸ§›â€â™‚ï¸ Vampire (1200)</div>
  </div>
  <div class="card">
    <b>â› Pickaxe</b>
    <div class="skin active" onclick="setPick('â›',this)">â› Default</div>
    <div class="skin" onclick="buyPick('ğŸ’',400,this)">ğŸ’ Diamond (400)</div>
    <div class="skin" onclick="buyPick('ğŸ”¥',700,this)">ğŸ”¥ Fire (700)</div>
    <div class="skin" onclick="buyPick('âš¡',1000,this)">âš¡ Electric (1000)</div>
    <div class="skin" onclick="buyPick('ğŸ‘‘',1500,this)">ğŸ‘‘ Crown (1500)</div>
  </div>
</div>

<!-- RANK -->
<div id="rank" class="box">
  <div class="card">
    ğŸ‘¤ <span id="pname"></span><br>
    ğŸ† Best Coin: <span id="best">0</span>
  </div>
</div>

<div class="log" id="log">Ready</div>
</div>

<script>
const tg = window.Telegram.WebApp; tg.ready(); tg.expand();
const beep = f => {let a=new AudioContext(), o=a.createOscillator(); o.frequency.value=f; o.connect(a.destination); o.start(); setTimeout(()=>o.stop(),80)};

let d = JSON.parse(localStorage.getItem("mineLegend")) || {
  coin:0, power:1, level:1, xp:0, pCost:10, aCost:50, best:0,
  name: prompt("Ø§Ø³Ù… Ù¾Ù„ÛŒØ±ØŸ") || "Miner",
  char: "ğŸ‘·", pick: "â›",
  chars: ["ğŸ‘·"], picks: ["â›"]
};

let autoInt = null;

function mine(){
  let gain = d.power;
  d.coin += gain; d.xp += gain;
  if(d.xp >= d.level*20){d.level++; d.xp = 0; beep(700);}
  beep(300); save();
}

function upgrade(){
  if(d.coin >= d.pCost){ d.coin -= d.pCost; d.power++; d.pCost *= 2; beep(500); save();}
}

function auto(){
  if(d.coin >= d.aCost && !autoInt){ d.coin -= d.aCost;
    autoInt = setInterval(()=>{d.coin += d.power; save();},1500); save();
  }
}

function quest(c,r){if(d.coin>=c){d.coin += r; beep(800); save();}}
function questLevel(l,r){if(d.level>=l){d.coin += r; save();}}
function booster(){if(d.coin>=200){d.coin-=200; d.power*=2; setTimeout(()=>{d.power/=2; save()},30000); save();}}
function relic(){if(d.coin>=500){d.coin-=500; d.power++; save();}}

function buyChar(c,price,el){if(d.coin>=price && !d.chars.includes(c)){d.coin-=price; d.chars.push(c); setChar(c,el); save();}}
function setChar(c,el){d.char=c; char.innerText=c; document.querySelectorAll("#skin .card:nth-child(1) .skin").forEach(x=>x.classList.remove("active")); el.classList.add("active");}

function buyPick(p,price,el){if(d.coin>=price && !d.picks.includes(p)){d.coin-=price; d.picks.push(p); setPick(p,el); save();}}
function setPick(p,el){d.pick=p; pick.innerText=p; document.querySelectorAll("#skin .card:nth-child(2) .skin").forEach(x=>x.classList.remove("active")); el.classList.add("active");}

function tab(id){document.querySelectorAll(".box").forEach(b=>b.classList.remove("active")); document.getElementById(id).classList.add("active");}
function save(){d.best = Math.max(d.best,d.coin); localStorage.setItem("mineLegend",JSON.stringify(d));
  coin.innerText=d.coin; power.innerText=d.power; level.innerText=d.level; pCost.innerText=d.pCost; aCost.innerText=d.aCost;
  best.innerText=d.best; pname.innerText=d.name; char.innerText=d.char; pick.innerText=d.pick;
}

save();
</script>
</body>
</html>
